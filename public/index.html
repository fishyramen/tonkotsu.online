<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>tonkotsu.online</title>

  <style>
    :root{
      --bg:#0b0d12;
      --bg2:#07080c;
      --panel:#0f1219;
      --panel2:#0d1016;

      --stroke:rgba(255,255,255,.08);
      --stroke2:rgba(255,255,255,.12);

      --text:#e9eef7;
      --muted:#9aa6b6;

      --online:#3bd47f;
      --idle:#ffd166;
      --dnd:#ff4d4d;
      --offline:#6d7a8f;

      --danger:#ff4d4d;
      --warn:#ffd166;
      --ok:#3bd47f;

      --shadow: 0 20px 80px rgba(0,0,0,.65);
      --ease: cubic-bezier(.2,.85,.2,1);
      --fast: 140ms var(--ease);
      --med: 220ms var(--ease);
      --slow: 520ms var(--ease);

      --radius: 14px;
      --h: 36px;
      --compact: 10px;

      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 30% 15%, rgba(255,255,255,.06), transparent 55%),
        radial-gradient(900px 520px at 80% 85%, rgba(255,255,255,.04), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--text);
      font: 520 13px/1.35 var(--font);
      overflow:hidden;

      /* custom cursor (can be disabled via settings) */
      cursor:none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* dotted stars background */
    .bg{ position:fixed; inset:0; pointer-events:none; opacity:.95; z-index:-1; }
    .stars{
      position:absolute; inset:-250px;
      background-repeat:repeat;
      background-size: 280px 280px;
      opacity:.45;
      animation: drift 140s linear infinite;
      background-image:
        radial-gradient(1px 1px at 20px 24px, rgba(255,255,255,.60), transparent 55%),
        radial-gradient(1px 1px at 92px 140px, rgba(255,255,255,.52), transparent 55%),
        radial-gradient(1px 1px at 150px 90px, rgba(255,255,255,.60), transparent 55%),
        radial-gradient(1px 1px at 214px 230px, rgba(255,255,255,.55), transparent 55%),
        radial-gradient(1px 1px at 250px 40px, rgba(255,255,255,.70), transparent 55%);
    }
    @keyframes drift{ to{ transform: translate3d(-280px,-280px,0);} }

    /* cursor */
    #cursor,#cursor2{
      position:fixed; top:0; left:0;
      pointer-events:none;
      z-index:9999;
      transform: translate(-50%,-50%);
      opacity:0;
      transition: opacity var(--med);
      mix-blend-mode: screen;
    }
    #cursor{
      width:10px; height:10px; border-radius:999px;
      background: rgba(255,255,255,.92);
      box-shadow: 0 0 0 8px rgba(255,255,255,.06), 0 0 24px rgba(255,255,255,.14);
      transition: width var(--fast), height var(--fast), opacity var(--med);
    }
    #cursor2{
      width:28px; height:28px; border-radius:999px;
      border:1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.02);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
      transition: width var(--med), height var(--med), opacity var(--med), border-color var(--fast), transform var(--fast);
    }
    .cursorPress #cursor{ width:8px; height:8px; }
    .cursorPress #cursor2{ width:22px; height:22px; }
    .cursorHover #cursor2{ width:36px; height:36px; border-color: rgba(255,255,255,.28); }
    .cursorText  #cursor2{ width:44px; height:44px; border-color: rgba(255,255,255,.25); }

    /* app frame */
    .shell{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding: 16px; }
    .frame{
      width:min(1160px, 100%);
      height:min(780px, 100%);
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: rgba(12,14,20,.82);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      animation: frameIn var(--slow) both;
      position:relative;
      min-height: 0; /* critical for flex children */
    }
    @keyframes frameIn{
      from{ opacity:0; transform: translateY(10px) scale(.99); filter: blur(2px); }
      to  { opacity:1; transform: translateY(0) scale(1); filter: blur(0); }
    }

    /* Top loading overlay (used for transitions) */
    .loading{
      position:absolute; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.74);
      backdrop-filter: blur(12px);
      z-index: 50;
      opacity:0;
      transition: opacity var(--med);
    }
    .loading.show{ display:flex; opacity:1; }
    .loader{
      width:min(520px, 92vw);
      border:1px solid var(--stroke);
      border-radius: 18px;
      background: rgba(10,12,18,.96);
      padding: 16px;
      box-shadow: 0 14px 70px rgba(0,0,0,.65);
      display:flex;
      flex-direction:column;
      gap: 12px;
      animation: pop var(--med) both;
    }
    @keyframes pop{
      from{ opacity:0; transform: translateY(10px); filter: blur(1px); }
      to  { opacity:1; transform: translateY(0); filter: blur(0); }
    }
    .spin{
      width:18px; height:18px;
      border-radius: 999px;
      border:2px solid rgba(255,255,255,.16);
      border-top-color: rgba(255,255,255,.78);
      animation: spin 650ms linear infinite;
    }
    @keyframes spin{ to{ transform: rotate(360deg);} }
    .loaderTitle{ font-weight: 950; font-size: 14px; letter-spacing:.2px; }
    .loaderSub{ color: var(--muted); font-size: 12px; line-height:1.45; }
    .loaderBar{
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      position:relative;
    }
    .loaderFill{
      position:absolute; left:0; top:0; bottom:0;
      width: 35%;
      background: rgba(255,255,255,.20);
      border-radius: 999px;
      animation: loadSweep 1.25s var(--ease) infinite;
    }
    @keyframes loadSweep{
      0%{ transform: translateX(-120%); }
      100%{ transform: translateX(320%); }
    }

    /* Layout */
    .layout{
      flex:1;
      min-height:0;
      display:flex;
      /* hard guarantee it shows after login */
      visibility: visible;
    }

    .colLeft{
      width: 292px;
      min-width: 270px;
      background: rgba(0,0,0,.20);
      border-right: 1px solid var(--stroke);
      display:flex;
      flex-direction:column;
      min-height:0;
    }
    .colMain{
      flex:1;
      min-width:0;
      display:flex;
      flex-direction:column;
      min-height:0;
      background: rgba(0,0,0,.10);
      position:relative;
    }

    /* Left header */
    .leftHeader{
      height: 50px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 10px;
      border-bottom:1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      gap: 8px;
    }
    .brand{
      font-weight: 950;
      letter-spacing:.2px;
      font-size: 13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 180px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .betaPill{
      font-size: 11px;
      font-weight: 950;
      color: rgba(255,255,255,.80);
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      padding: 4px 8px;
      border-radius: 999px;
      letter-spacing: .2px;
    }
    .leftHeaderRight{ display:flex; gap:8px; }

    /* Buttons / fields */
    .btn{
      height: var(--h);
      padding: 0 12px;
      border-radius: 12px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.04);
      color:var(--text);
      cursor:pointer;
      user-select:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-weight: 950;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast), filter var(--fast);
      outline:none;
      position:relative;
      overflow:hidden;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); box-shadow: 0 12px 34px rgba(0,0,0,.35); }
    .btn:active{ transform: translateY(0) scale(.99); }
    .btn.primary{ background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.18); }
    .btn.ghost{ background: transparent; border-color: rgba(255,255,255,.10); }
    .btn.small{ height: 32px; border-radius: 11px; font-size: 12px; padding:0 10px; }

    .iconBtn{
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: 12px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-weight: 950;
    }

    .field{
      height: var(--h);
      width:100%;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color:var(--text);
      padding: 0 12px;
      outline:none;
      transition: border-color var(--fast), background var(--fast), transform var(--fast);
      font-size: 13px;
    }
    .field::placeholder{ color: rgba(154,166,182,.75); }
    .field:focus{ border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.04); transform: translateY(-1px); }

    .muted{ color:var(--muted); }
    .tiny{ font-size:11px; }
    .sm{ font-size: 12px; }

    /* Scroll */
    .scroll{ overflow:auto; min-height:0; }
    .scroll::-webkit-scrollbar{ width: 10px; }
    .scroll::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.08);
      border-radius: 99px;
      border: 3px solid transparent;
      background-clip: content-box;
    }

    /* Channel list */
    .channels{
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 8px;
      min-height:0;
    }
    .sectionTitle{
      font-size: 11px;
      letter-spacing: .22px;
      color: rgba(255,255,255,.55);
      font-weight: 950;
      padding: 8px 6px 4px 6px;
      text-transform: uppercase;
    }
    .item{
      height: 40px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.07);
      background: rgba(255,255,255,.02);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 10px;
      gap: 10px;
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      position:relative;
      overflow:hidden;
    }
    .item:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.10);
      box-shadow: 0 12px 34px rgba(0,0,0,.35);
    }
    .item.active{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.14);
    }
    .left{ display:flex; align-items:center; gap: 10px; min-width:0; }
    .hash{
      width: 24px;
      height: 24px;
      border-radius: 9px;
      background: rgba(255,255,255,.06);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 950;
      color: rgba(255,255,255,.85);
      flex:0 0 auto;
      font-size: 12px;
    }
    .name{ font-weight: 950; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size: 13px; }
    .sub{ font-size: 11px; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-top:2px; }
    .nameCol{ min-width:0; display:flex; flex-direction:column; }

    /* Badges */
    .badge{
      min-width: 20px;
      height: 18px;
      padding: 0 6px;
      border-radius: 7px;
      background: var(--danger);
      color:#0b0d10;
      font-weight: 950;
      font-size: 11px;
      display:none;
      align-items:center;
      justify-content:center;
      line-height:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.30);
      animation: pop2 var(--med) both;
    }
    .badge.show{ display:flex; }
    @keyframes pop2{ from{ opacity:0; transform:scale(.86);} to{ opacity:1; transform:scale(1);} }

    /* Online list */
    .onlineWrap{
      border-top:1px solid var(--stroke);
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 8px;
      min-height: 0;
      max-height: 200px;
    }
    .onlineRow{
      height: 36px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,.02);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 10px;
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      gap: 10px;
    }
    .onlineRow:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.10);
      box-shadow: 0 12px 34px rgba(0,0,0,.30);
    }

    /* Dots */
    .dot{
      width:10px; height:10px;
      border-radius: 99px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.18);
      flex:0 0 auto;
    }
    .dot.online{ background: var(--online); box-shadow: 0 0 0 3px rgba(59,212,127,.12); }
    .dot.idle{ background: var(--idle); box-shadow: 0 0 0 3px rgba(255,209,102,.12); }
    .dot.dnd{ background: var(--dnd); box-shadow: 0 0 0 3px rgba(255,77,77,.12); }
    .dot.offline{ background: var(--offline); box-shadow: 0 0 0 3px rgba(109,122,143,.12); }

    /* Main header */
    .topbar{
      height: 52px;
      border-bottom:1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 12px;
      gap: 12px;
    }
    .topic{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .topicRow{
      display:flex;
      align-items:center;
      gap: 10px;
      min-width:0;
    }
    .topicTitle{
      font-weight: 950;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      font-size: 14px;
      letter-spacing:.2px;
    }
    .topicSub{
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    /* Manage button near group name (shown by JS only for group view + owner/mod perms) */
    .manageBtn{ display:none; }
    .manageBtn.show{ display:inline-flex; }

    /* Right area */
    .rightTop{ display:flex; align-items:center; gap: 10px; flex:0 0 auto; }

    /* Inbox pill (better) */
    .inboxBtnWrap{
      position:relative;
      display:none; /* hidden for guests, shown for accounts */
    }
    .inboxPill{
      height: 36px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      padding: 0 14px;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      font-weight: 950;
      cursor:pointer;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      user-select:none;
    }
    .inboxPill:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 12px 34px rgba(0,0,0,.35);
    }
    .inboxDot{
      width:10px; height:10px; border-radius:99px;
      background: rgba(255,255,255,.25);
      border:1px solid rgba(255,255,255,.18);
    }
    .inboxBadgeMini{
      position:absolute;
      top:-6px; right:-6px;
      min-width:18px;
      height:18px;
      border-radius:9px;
      background: var(--danger);
      color:#0b0d10;
      font-weight: 950;
      font-size: 11px;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 0 6px;
      box-shadow: 0 10px 24px rgba(0,0,0,.35);
    }
    .inboxBadgeMini.show{ display:flex; }

    /* Account pill */
    .mePill{
      height: 36px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding: 0 12px;
      display:none;
      align-items:center;
      gap: 10px;
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      max-width: 320px;
    }
    .mePill:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.05);
      box-shadow: 0 12px 34px rgba(0,0,0,.35);
    }
    .meName{
      font-weight: 950;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 210px;
      font-size: 13px;
    }
    .caret{ opacity:.8; font-weight: 950; }

    /* Chat area */
    .chat{ flex:1; min-height:0; padding: 12px; overflow:auto; }
    .msg{ margin-bottom: 10px; display:flex; }
    .bubble{
      max-width: 76%;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.07);
      background: rgba(255,255,255,.02);
      padding: 10px 11px;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      transition: transform var(--fast), background var(--fast), border-color var(--fast), box-shadow var(--fast);
      animation: msgIn var(--med) both;
    }
    @keyframes msgIn{
      from{ opacity:0; transform: translateY(8px); filter: blur(1px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0); }
    }
    .bubble:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.03);
      border-color: rgba(255,255,255,.10);
      box-shadow: 0 14px 42px rgba(0,0,0,.35);
    }
    .meta{
      display:flex; align-items:center; justify-content:space-between;
      gap: 10px; margin-bottom: 6px;
    }
    .user{
      font-weight: 950;
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast);
      font-size: 13px;
    }
    .user:hover{ transform: translateY(-1px); }
    .time{ font-size:11px; color:var(--muted); flex:0 0 auto; }
    .text{ white-space: pre-wrap; word-break: break-word; font-size: 13px; }
    .mention{ color: var(--danger); font-weight: 950; }

    /* Composer */
    .composer{
      border-top:1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      padding: 10px 12px 12px 12px;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .row{ display:flex; gap: 10px; align-items:stretch; }
    .row .field{ flex:1; }
    .row .btn{ width: 118px; }

    /* Cooldown bar (dynamic) */
    .cooldownWrap{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap:wrap;
    }
    .coolBar{
      height: 10px;
      flex: 1 1 220px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      overflow:hidden;
      position:relative;
      min-width: 160px;
    }
    .coolFill{
      position:absolute; left:0; top:0; bottom:0;
      width: 0%;
      background: rgba(255,255,255,.18);
      transition: width var(--fast);
    }
    .coolWarn .coolFill{ background: rgba(255,77,77,.22); }
    .shake{
      animation: shake 360ms var(--ease) both;
    }
    @keyframes shake{
      0%{ transform: translateX(0); }
      20%{ transform: translateX(-4px); }
      40%{ transform: translateX(4px); }
      60%{ transform: translateX(-3px); }
      80%{ transform: translateX(3px); }
      100%{ transform: translateX(0); }
    }

    /* Footer */
    .footer{
      height: 40px;
      border-top: 1px solid var(--stroke);
      background: rgba(0,0,0,.16);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 12px;
      font-size: 11px;
      color: rgba(255,255,255,.62);
      gap: 12px;
    }
    .footer a{ color: rgba(255,255,255,.78); text-decoration:none; }
    .footer a:hover{ text-decoration:underline; }
    .footerLinks{ display:flex; gap: 12px; flex-wrap:wrap; }

    /* Login overlay */
    .loginOverlay{
      position:absolute; inset:0;
      z-index: 60;
      background: rgba(0,0,0,.92);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 16px;
      opacity:1;
      transition: opacity var(--med);
    }
    .loginOverlay.hidden{ opacity:0; pointer-events:none; }

    .loginGrid{
      width: min(980px, 96vw);
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 14px;
      align-items:stretch;
    }
    @media (max-width: 860px){
      .loginGrid{ grid-template-columns: 1fr; }
    }

    .loginBox{
      border:1px solid var(--stroke);
      border-radius: 18px;
      background: rgba(12,14,20,.92);
      box-shadow: 0 18px 70px rgba(0,0,0,.60);
      padding: 16px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      position:relative;
      overflow:hidden;
      min-height: 340px;
    }
    .loginStars{
      position:absolute; inset:-220px;
      background-repeat:repeat;
      background-size: 260px 260px;
      opacity:.55;
      animation: drift2 160s linear infinite;
      background-image:
        radial-gradient(1px 1px at 22px 28px, rgba(255,255,255,.60), transparent 55%),
        radial-gradient(1px 1px at 68px 160px, rgba(255,255,255,.52), transparent 55%),
        radial-gradient(1px 1px at 140px 86px, rgba(255,255,255,.60), transparent 55%),
        radial-gradient(1px 1px at 200px 220px, rgba(255,255,255,.55), transparent 55%),
        radial-gradient(1px 1px at 242px 44px, rgba(255,255,255,.70), transparent 55%);
    }
    @keyframes drift2{ to{ transform: translate3d(-260px,-260px,0);} }
    .loginInner{ position:relative; z-index:1; display:flex; flex-direction:column; gap: 12px; }
    .loginTitleRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .loginTitle{
      font-weight: 950;
      font-size: 16px;
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap: 10px;
      white-space:nowrap;
    }

    .card{
      border:1px solid rgba(255,255,255,.08);
      border-radius: 16px;
      background: rgba(255,255,255,.02);
      padding: 12px;
    }
    .cardTitle{ font-weight: 950; margin-bottom: 8px; }
    .cardList{ display:flex; flex-direction:column; gap: 8px; }
    .line{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }
    .tag{
      font-size: 11px;
      font-weight: 950;
      padding: 4px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.80);
      flex: 0 0 auto;
    }

    /* Password eye */
    .pwWrap{ position:relative; }
    .field.pw{ padding-right: 58px; }
    .eye{
      position:absolute;
      right: 8px;
      top:50%;
      transform: translateY(-50%);
      height: 30px;
      width: 48px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      transition: transform var(--fast), background var(--fast);
    }
    .eye:hover{ transform: translateY(-50%) translateY(-1px); background: rgba(255,255,255,.05); }

    /* Modal */
    .modalBack{
      position:fixed; inset:0;
      z-index: 70;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(10px);
      opacity:0;
      transition: opacity var(--med);
    }
    .modalBack.show{ display:flex; opacity:1; }
    .modal{
      width:min(760px, 96vw);
      max-height: min(78vh, 760px);
      overflow:auto;
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: rgba(12,14,20,.94);
      box-shadow: 0 18px 70px rgba(0,0,0,.60);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      animation: pop var(--med) both;
    }
    .modalTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      position:sticky;
      top:0;
      background: rgba(12,14,20,.94);
      padding-bottom: 8px;
      z-index: 2;
    }
    .modalTitle{ font-weight: 950; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    /* Ripple */
    .ripple{
      position:absolute;
      width: 12px; height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.18);
      transform: translate(-50%,-50%);
      pointer-events:none;
      animation: ripple 520ms var(--ease) both;
    }
    @keyframes ripple{
      from{ opacity:.6; transform: translate(-50%,-50%) scale(1); }
      to{ opacity:0; transform: translate(-50%,-50%) scale(22); }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
      body{ cursor:auto; }
      #cursor,#cursor2{ display:none !important; }
    }

    /* Mobile UX mode helper (JS toggles body.mobileUX) */
    body.mobileUX .shell{ padding: 0; }
    body.mobileUX .frame{
      width:100%;
      height:100%;
      border-radius: 0;
      border-left:none;
      border-right:none;
      border-top:none;
      border-bottom:none;
    }
    body.mobileUX .colLeft{
      position:absolute;
      left:0; top:0; bottom:0;
      transform: translateX(-105%);
      transition: transform var(--med);
      z-index: 40;
      width: 86vw;
      max-width: 340px;
      box-shadow: 0 20px 80px rgba(0,0,0,.65);
      background: rgba(8,10,14,.92);
      backdrop-filter: blur(10px);
    }
    body.mobileUX .colLeft.open{ transform: translateX(0); }
    body.mobileUX .topbar{ padding-left: 10px; }
    .mobileNavBtn{
      display:none;
    }
    body.mobileUX .mobileNavBtn{
      display:inline-flex;
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"><div class="stars"></div></div>

  <div id="cursor"></div>
  <div id="cursor2"></div>

  <div class="shell">
    <div class="frame" id="frame">

      <!-- Transition loading overlay -->
      <div class="loading" id="loading" aria-hidden="true">
        <div class="loader">
          <div style="display:flex;align-items:center;gap:10px">
            <div class="spin"></div>
            <div class="loaderTitle" id="loaderTitle">Loading</div>
          </div>
          <div class="loaderSub" id="loaderSub">syncing‚Ä¶</div>
          <div class="loaderBar" aria-hidden="true"><div class="loaderFill"></div></div>
          <div class="tiny muted" id="loaderFoot">Please don‚Äôt refresh while syncing.</div>
        </div>
      </div>

      <!-- Login overlay -->
      <div class="loginOverlay" id="loginOverlay">
        <div class="loginGrid">
          <!-- Login -->
          <div class="loginBox">
            <div class="loginStars" aria-hidden="true"></div>
            <div class="loginInner">
              <div class="loginTitleRow">
                <div class="loginTitle">
                  tonkotsu.online <span class="betaPill">BETA</span>
                </div>
                <div class="tag" title="Public status page">/status</div>
              </div>

              <div class="card">
                <div class="cardTitle">Log in / Create account</div>

                <div style="display:flex;gap:10px;flex-wrap:wrap">
                  <div style="flex:1;min-width:220px">
                    <div class="muted tiny" style="margin-bottom:6px">Username (letters/numbers only, 4‚Äì20)</div>
                    <input class="field" id="username" placeholder="yourname" autocomplete="username"/>
                  </div>
                  <div style="flex:1;min-width:220px">
                    <div class="muted tiny" style="margin-bottom:6px">Password (letters/numbers only, 6‚Äì64 recommended)</div>
                    <div class="pwWrap">
                      <input class="field pw" id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password"/>
                      <div class="eye" id="togglePass" title="Show/Hide">üëÅ</div>
                    </div>
                  </div>
                </div>

                <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
                  <button class="btn primary" id="joinBtn" style="flex:1;min-width:220px">Log in / Create</button>
                  <button class="btn" id="guestBtn" style="flex:1;min-width:220px">Guest</button>
                </div>

                <div class="muted tiny" style="margin-top:10px;line-height:1.55">
                  ‚Ä¢ Guests have a slower cooldown and no DMs / no groups / no inbox.<br/>
                  ‚Ä¢ Your session can resume automatically if you enable it in Settings (after login).
                </div>
              </div>

              <div class="card" id="trustHintCard">
                <div class="cardTitle">Trust score (how it works)</div>
                <div class="muted tiny" style="line-height:1.6" id="trustHint">
                  Raise: account age, clean chat history, being active without spam, getting friends, joining groups.<br/>
                  Lower: repeated spam, repeated identical messages, link spam, flagged content, frequent ‚Äúnew device/session‚Äù logins.<br/>
                  <span class="tiny muted">Note: this affects cooldown + link privileges for non-global chats.</span>
                </div>
              </div>

            </div>
          </div>

          <!-- What's New / Beta notes -->
          <div class="loginBox">
            <div class="loginStars" aria-hidden="true" style="opacity:.30"></div>
            <div class="loginInner">
              <div class="card">
                <div class="cardTitle">What‚Äôs new</div>
                <div class="cardList" id="whatsNewList">
                  <div class="line">
                    <div style="min-width:0">
                      <div style="font-weight:950">New: What‚Äôs New panel</div>
                      <div class="muted tiny">You‚Äôre reading it right now.</div>
                    </div>
                    <div class="tag">2026-01-24</div>
                  </div>

                  <div class="line">
                    <div style="min-width:0">
                      <div style="font-weight:950">Profile upgrades</div>
                      <div class="muted tiny">Badges, stats, customization (bio + accent color).</div>
                    </div>
                    <div class="tag">2026-01-24</div>
                  </div>

                  <div class="line">
                    <div style="min-width:0">
                      <div style="font-weight:950">Mobile UX mode</div>
                      <div class="muted tiny">Swipe-style layout behavior + compact spacing.</div>
                    </div>
                    <div class="tag">2026-01-24</div>
                  </div>

                  <div class="line">
                    <div style="min-width:0">
                      <div style="font-weight:950">Public status page</div>
                      <div class="muted tiny">Server uptime + online count at <b style="color:var(--text)">/status</b>.</div>
                    </div>
                    <div class="tag">2026-01-24</div>
                  </div>
                </div>

                <div class="muted tiny" style="margin-top:10px;line-height:1.55">
                  Beta note: accounts and data are not guaranteed to persist after major updates.
                  If anything breaks, contact <b style="color:var(--text)">fishy_x1</b> on Discord or <b style="color:var(--text)">fishyramen</b> on GitHub.
                </div>
              </div>

              <div class="card">
                <div class="cardTitle">Badges</div>
                <div class="muted tiny" style="line-height:1.65">
                  ‚Ä¢ <b style="color:var(--text)">Early User</b> (beta joiners)<br/>
                  ‚Ä¢ <b style="color:var(--text)">Lv 10 / Lv 25 / Lv 50</b> milestones<br/>
                  ‚Ä¢ <b style="color:var(--text)">Trusted</b> (high trust score)<br/>
                  ‚Ä¢ More coming (events + community)
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

      <!-- App -->
      <div class="layout" id="app">
        <div class="colLeft" id="colLeft">
          <div class="leftHeader">
            <div class="brand">
              tonkotsu.online <span class="betaPill">BETA</span>
            </div>
            <div class="leftHeaderRight">
              <button class="btn small ghost" id="discoverGroupsBtn" title="Discover groups">üîé</button>
              <button class="btn small ghost" id="createGroupBtn" title="Create group">+</button>
            </div>
          </div>

          <div class="channels scroll" style="flex:1">
            <div class="sectionTitle">Messages</div>
            <div id="channelList" style="display:flex;flex-direction:column;gap:8px"></div>

            <div class="sectionTitle" style="margin-top:6px">Online</div>
            <div class="onlineWrap scroll" id="onlineList"></div>
          </div>
        </div>

        <div class="colMain">
          <div class="topbar">
            <button class="btn ghost iconBtn mobileNavBtn" id="mobileNavBtn" title="Menu">‚ò∞</button>

            <div class="topic" style="flex:1;min-width:0">
              <div class="topicRow">
                <div class="topicTitle" id="topicTitle"># global</div>
                <button class="btn small ghost manageBtn" id="manageBtn" title="Manage group">Manage</button>
              </div>
              <div class="topicSub" id="topicSub">everyone</div>
            </div>

            <div class="rightTop">
              <div class="inboxBtnWrap" id="inboxBtnWrap">
                <div class="inboxPill" id="inboxBtn" title="Inbox">
                  <span class="inboxDot" aria-hidden="true"></span>
                  <span>Inbox</span>
                </div>
                <div class="inboxBadgeMini" id="inboxBadgeMini">0</div>
              </div>

              <button class="btn ghost iconBtn" id="settingsBtn" title="Settings">‚öô</button>

              <div class="mePill" id="mePill" title="Account menu">
                <div class="dot online" id="meDot"></div>
                <div class="meName" id="meName">You</div>
                <div class="caret">‚ñæ</div>
              </div>
            </div>
          </div>

          <div class="chat scroll" id="chat"></div>

          <div class="composer">
            <div class="row">
              <input class="field" id="message" placeholder="Message‚Ä¶ (@user to mention)"/>
              <button class="btn primary" id="sendBtn">Send</button>
            </div>

            <!-- Cooldown UI (no ‚Äústatus: ‚Ä¶‚Äù text shown here; JS will drive bar + warning) -->
            <div class="cooldownWrap">
              <div class="coolBar" id="cooldownBar" title="Cooldown">
                <div class="coolFill" id="cooldownFill"></div>
              </div>
              <div class="tiny muted" id="cooldownHint">Cooldown: ‚Äî</div>
            </div>

            <div class="tiny" id="warningText" style="display:none;color:rgba(255,209,102,.95);font-weight:950">
              Don‚Äôt repeat the same message.
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="footerLinks">
          <a href="https://ko-fi.com/fishy_x1" target="_blank" rel="noreferrer">Ko-fi</a>
          <a href="https://github.com/fishyramen" target="_blank" rel="noreferrer">GitHub</a>
          <a href="/status" target="_blank" rel="noreferrer">Status</a>
        </div>
        <div>¬© <span id="year"></span> tonkotsu.online</div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modalBack" id="modalBack">
    <div class="modal">
      <div class="modalTop">
        <div class="modalTitle" id="modalTitle">Modal</div>
        <button class="btn small" id="modalClose">Close</button>
      </div>
      <div id="modalBody"></div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/script.js"></script>
</body>
</html>
